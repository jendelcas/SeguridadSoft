<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_212) on Thu Dec 23 11:31:23 GMT 2021 -->
<title>PromotionMgrIf (KonaKart Server Engine API Documentation)</title>
<meta name="date" content="2021-12-23">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PromotionMgrIf (KonaKart Server Engine API Documentation)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6,"i11":6,"i12":6,"i13":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/blif/ProductMgrIf.html" title="interface in com.konakart.blif"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/konakart/blif/PunchOutMgrIf.html" title="interface in com.konakart.blif"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/blif/PromotionMgrIf.html" target="_top">Frames</a></li>
<li><a href="PromotionMgrIf.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.konakart.blif</div>
<h2 title="Interface PromotionMgrIf" class="title">Interface PromotionMgrIf</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">PromotionMgr</a>, <a href="../../../com/konakart/bl/PromotionMgrEE.html" title="class in com.konakart.bl">PromotionMgrEE</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">PromotionMgrIf</span></pre>
<div class="block">PromotionMgrIf
 
 Interface which an implementation of this manager must adhere to.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#checkCoupon-java.lang.String-">checkCoupon</a></span>(java.lang.String&nbsp;couponCode)</code>
<div class="block">This method is used to verify whether a coupon code actually exists and if it does, whether
 the coupon is still active.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getAllPromotions--">getAllPromotions</a></span>()</code>
<div class="block">Returns an array of all active promotions</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Coupon.html" title="class in com.konakart.app">Coupon</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getCouponPerId-int-com.konakart.appif.CouponOptionsIf-">getCouponPerId</a></span>(int&nbsp;couponId,
              <a href="../../../com/konakart/appif/CouponOptionsIf.html" title="interface in com.konakart.appif">CouponOptionsIf</a>&nbsp;options)</code>
<div class="block">Returns a coupon for the coupon id passed in as a parameter.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Coupon.html" title="class in com.konakart.app">Coupon</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getCouponsPerCode-java.lang.String-com.konakart.appif.CouponOptionsIf-">getCouponsPerCode</a></span>(java.lang.String&nbsp;couponCode,
                 <a href="../../../com/konakart/appif/CouponOptionsIf.html" title="interface in com.konakart.appif">CouponOptionsIf</a>&nbsp;options)</code>
<div class="block">Returns an array of coupons for the coupon code passed in as a parameter.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotion-int-java.lang.String-int-com.konakart.appif.FetchPromotionOptionsIf-com.konakart.appif.FetchProductOptionsIf-">getPromotion</a></span>(int&nbsp;promotionId,
            java.lang.String&nbsp;promotionName,
            int&nbsp;languageId,
            <a href="../../../com/konakart/appif/FetchPromotionOptionsIf.html" title="interface in com.konakart.appif">FetchPromotionOptionsIf</a>&nbsp;prmOptions,
            <a href="../../../com/konakart/appif/FetchProductOptionsIf.html" title="interface in com.konakart.appif">FetchProductOptionsIf</a>&nbsp;prodOptions)</code>
<div class="block">This API call is used to retrieve a single promotion matching an id or name.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionIdForGiftCertificate-com.konakart.appif.OrderProductIf-">getPromotionIdForGiftCertificate</a></span>(<a href="../../../com/konakart/appif/OrderProductIf.html" title="interface in com.konakart.appif">OrderProductIf</a>&nbsp;op)</code>
<div class="block">Get the promotion id for an order product object containing a gift certificate.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotions-java.lang.String-com.konakart.app.Order-">getPromotions</a></span>(java.lang.String&nbsp;orderTotalCode,
             <a href="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</a>&nbsp;order)</code>
<div class="block">We return all active promotions for the orderTotalCode passed in as a parameter.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionsPerCoupon-java.lang.String-int-com.konakart.appif.PromotionOptionsIf-">getPromotionsPerCoupon</a></span>(java.lang.String&nbsp;couponCode,
                      int&nbsp;couponId,
                      <a href="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</a>&nbsp;options)</code>
<div class="block">This method is used to return an array of promotions associated with the coupon(s) identified
 by the input parameters.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionsPerProducts-java.lang.String-int-com.konakart.appif.ProductIf:A-com.konakart.appif.PromotionIf:A-java.lang.String:A-com.konakart.appif.PromotionOptionsIf-">getPromotionsPerProducts</a></span>(java.lang.String&nbsp;sessionId,
                        int&nbsp;customerId,
                        <a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>[]&nbsp;products,
                        <a href="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</a>[]&nbsp;promotions,
                        java.lang.String[]&nbsp;couponCodes,
                        <a href="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</a>&nbsp;options)</code>
<div class="block">This method is used to calculate a discount on individual products so that the discount can
 be displayed without having to add the product to the cart.<br>
 The method receives an array of products and returns an array of products with attached
 PromotionResult objects that contain the results of one or more of the promotions passed in
 as a parameter.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionUsageCountMaxRetries--">getPromotionUsageCountMaxRetries</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#insertCoupon-com.konakart.appif.CouponIf-int-">insertCoupon</a></span>(<a href="../../../com/konakart/appif/CouponIf.html" title="interface in com.konakart.appif">CouponIf</a>&nbsp;coupon,
            int&nbsp;promotionId)</code>
<div class="block">Insert a coupon and associate it with the promotion referenced by promotionId.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#refreshConfigs--">refreshConfigs</a></span>()</code>
<div class="block">Refresh the configuration of the Promotion manager</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#setPromotionUsageCountMaxRetries-int-">setPromotionUsageCountMaxRetries</a></span>(int&nbsp;promotionUsageCountMaxRetries)</code>
<div class="block">The maximum number of optimistic concurrency retries when setting the promotion usage count</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/blif/PromotionMgrIf.html#updatePromotionUsage-com.konakart.app.Order-">updatePromotionUsage</a></span>(<a href="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</a>&nbsp;order)</code>
<div class="block">If the order has any associated coupons we iterate through the coupons and increment the
 timesUsed attribute.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPromotions-java.lang.String-com.konakart.app.Order-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPromotions</h4>
<pre><a href="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</a>[]&nbsp;getPromotions(java.lang.String&nbsp;orderTotalCode,
                          <a href="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</a>&nbsp;order)
                   throws java.lang.Exception</pre>
<div class="block">We return all active promotions for the orderTotalCode passed in as a parameter. The
 promotion may only apply for a subset of the products within the order so we return this
 information as an attribute of the Promotion object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>orderTotalCode</code> - the orderTotalCode</dd>
<dd><code>order</code> - the order</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An array of promotion objects</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="updatePromotionUsage-com.konakart.app.Order-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updatePromotionUsage</h4>
<pre>void&nbsp;updatePromotionUsage(<a href="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</a>&nbsp;order)
                   throws java.lang.Exception</pre>
<div class="block">If the order has any associated coupons we iterate through the coupons and increment the
 timesUsed attribute. If the order has any associated promotions that were linked to the
 customer directly through the promotion_to_customer table, then we retrieve these records and
 increment the timesUsed attribute.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>order</code> - the order</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getPromotionIdForGiftCertificate-com.konakart.appif.OrderProductIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPromotionIdForGiftCertificate</h4>
<pre>int&nbsp;getPromotionIdForGiftCertificate(<a href="../../../com/konakart/appif/OrderProductIf.html" title="interface in com.konakart.appif">OrderProductIf</a>&nbsp;op)
                              throws com.konakart.app.KKException,
                                     org.apache.torque.TorqueException,
                                     com.workingdogs.village.DataSetException</pre>
<div class="block">Get the promotion id for an order product object containing a gift certificate. A negative id
 is returned if a promotion doesn't exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>op</code> - the op</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the id of the promotion or -1 if a promotion doesn't exist.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.konakart.app.KKException</code> - an unexpected KKException exception</dd>
<dd><code>org.apache.torque.TorqueException</code> - an unexpected exception in Torque (the database layer)</dd>
<dd><code>com.workingdogs.village.DataSetException</code> - an unexpected exception due to data in Torque (the database layer)</dd>
</dl>
</li>
</ul>
<a name="insertCoupon-com.konakart.appif.CouponIf-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertCoupon</h4>
<pre>int&nbsp;insertCoupon(<a href="../../../com/konakart/appif/CouponIf.html" title="interface in com.konakart.appif">CouponIf</a>&nbsp;coupon,
                 int&nbsp;promotionId)
          throws java.lang.Exception</pre>
<div class="block">Insert a coupon and associate it with the promotion referenced by promotionId. If the
 promotionId is a negative number then no association is done.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>coupon</code> - the coupon</dd>
<dd><code>promotionId</code> - the promotionId</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the coupon Id</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="checkCoupon-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkCoupon</h4>
<pre>int&nbsp;checkCoupon(java.lang.String&nbsp;couponCode)
         throws com.workingdogs.village.DataSetException,
                org.apache.torque.TorqueException</pre>
<div class="block">This method is used to verify whether a coupon code actually exists and if it does, whether
 the coupon is still active. Valid return values for this method are:
 <ul>
 <li>com.konakart.bl.PromotionMgr.COUPON_DOESNT_EXIST - The coupon code does not exist.</li>
 <li>com.konakart.bl.PromotionMgr.COUPON_EXISTS_ACTIVE - The coupon code does exist and the
 coupon is still active.</li>
 <li>com.konakart.bl.PromotionMgr.COUPON_EXISTS_INACTIVE - The coupon code does exist but the
 coupon is no longer active since the number of times it has been used has reached the maximum
 number of times allowed.</li>
 </ul>
 Even if the coupon exists and is active, it won't actually do anything if it isn't connected
 to a valid promotion and any rules associated with the promotion are also satisfied. However,
 this method may still be used to at least warn a customer that he may have mistyped the
 coupon code or that it is no longer valid.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>couponCode</code> - The coupon code</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an integer</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.workingdogs.village.DataSetException</code> - an unexpected exception due to data in Torque (the database layer)</dd>
<dd><code>org.apache.torque.TorqueException</code> - an unexpected exception in Torque (the database layer)</dd>
</dl>
</li>
</ul>
<a name="getAllPromotions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllPromotions</h4>
<pre><a href="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</a>[]&nbsp;getAllPromotions()
                      throws java.lang.Exception</pre>
<div class="block">Returns an array of all active promotions</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of all active promotions</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getPromotionsPerProducts-java.lang.String-int-com.konakart.appif.ProductIf:A-com.konakart.appif.PromotionIf:A-java.lang.String:A-com.konakart.appif.PromotionOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPromotionsPerProducts</h4>
<pre><a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>[]&nbsp;getPromotionsPerProducts(java.lang.String&nbsp;sessionId,
                                     int&nbsp;customerId,
                                     <a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>[]&nbsp;products,
                                     <a href="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</a>[]&nbsp;promotions,
                                     java.lang.String[]&nbsp;couponCodes,
                                     <a href="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</a>&nbsp;options)
                              throws java.lang.Exception</pre>
<div class="block">This method is used to calculate a discount on individual products so that the discount can
 be displayed without having to add the product to the cart.<br>
 The method receives an array of products and returns an array of products with attached
 PromotionResult objects that contain the results of one or more of the promotions passed in
 as a parameter. The PromotionResult contains the value of the discount, whether it is an
 amount or a percentage discount and also information regarding the promotion it applies to.
 If a product has an array of ProductQuantity objects (one for each SKU) each one of these may
 have an array of PromotionResult objects since a promotion may only apply to one product
 configuration and not to another (i.e. blue shirt and not red shirt).<br>
 The PromotionOptions object can be configured so that the values of the promotions for a
 product are subtracted from the product price. The options allow you to set rules that
 determine whether in this case the promotions need to be cumulative or whether the largest or
 smallest should be chosen. The calculation is only made for products with a single array of
 PromotionResult objects. It is not calculated for products that have an array of
 PromotionResult objects for each ProductQuantity.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - Only used if the customer is logged in. Otherwise set to null.</dd>
<dd><code>customerId</code> - If the sessionId is set to null then the customerId should contain the id of the
            temporary user which is a negative number. The temporary user id can be used for
            evaluating expression rules.</dd>
<dd><code>products</code> - An array of products to be processed</dd>
<dd><code>promotions</code> - The promotions which will be applied to the products if all rules are matched.</dd>
<dd><code>couponCodes</code> - Coupon codes to use. If none of the promotions require coupons, it should be set
            to null</dd>
<dd><code>options</code> - An object containing information to configure the calculation for applying one or
            more promotion results to the product price.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the same array of products passed in as a parameter with attached
         PromotionResult objects if applicable</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="refreshConfigs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshConfigs</h4>
<pre>void&nbsp;refreshConfigs()
             throws java.lang.Exception</pre>
<div class="block">Refresh the configuration of the Promotion manager</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getCouponsPerCode-java.lang.String-com.konakart.appif.CouponOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCouponsPerCode</h4>
<pre><a href="../../../com/konakart/app/Coupon.html" title="class in com.konakart.app">Coupon</a>[]&nbsp;getCouponsPerCode(java.lang.String&nbsp;couponCode,
                           <a href="../../../com/konakart/appif/CouponOptionsIf.html" title="interface in com.konakart.appif">CouponOptionsIf</a>&nbsp;options)
                    throws java.lang.Exception</pre>
<div class="block">Returns an array of coupons for the coupon code passed in as a parameter.
 <p>
 The options object allows you to specify that only active coupons should be returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>couponCode</code> - the couponCode</dd>
<dd><code>options</code> - Allows you to specify that only active coupons should be returned</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of coupons. An empty array is returned if no coupons are available.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getCouponPerId-int-com.konakart.appif.CouponOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCouponPerId</h4>
<pre><a href="../../../com/konakart/app/Coupon.html" title="class in com.konakart.app">Coupon</a>&nbsp;getCouponPerId(int&nbsp;couponId,
                      <a href="../../../com/konakart/appif/CouponOptionsIf.html" title="interface in com.konakart.appif">CouponOptionsIf</a>&nbsp;options)
               throws java.lang.Exception</pre>
<div class="block">Returns a coupon for the coupon id passed in as a parameter.
 <p>
 The options object allows you to specify that only active coupons should be returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>couponId</code> - the couponId</dd>
<dd><code>options</code> - Allows you to specify that only active coupons should be returned</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a coupon object or null if a coupon isn't available.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getPromotionsPerCoupon-java.lang.String-int-com.konakart.appif.PromotionOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPromotionsPerCoupon</h4>
<pre><a href="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</a>[]&nbsp;getPromotionsPerCoupon(java.lang.String&nbsp;couponCode,
                                   int&nbsp;couponId,
                                   <a href="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</a>&nbsp;options)
                            throws java.lang.Exception</pre>
<div class="block">This method is used to return an array of promotions associated with the coupon(s) identified
 by the input parameters. The method will either use the couponCode or the couponId parameter.
 The couponCode is used if not null, otherwise couponId is used. Note that multiple coupons
 may share the same coupon code.
 <p>
 The PromotionOptions may be used to control whether or not to use expired coupons and whether
 or not to return expired promotions. The default is to not check whether coupons or
 promotions have expired.
 <p>
 If no promotions are found, an empty array is returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>couponCode</code> - The code of the coupon</dd>
<dd><code>couponId</code> - The unique numeric id of the coupon</dd>
<dd><code>options</code> - A PromotionOptions object to control whether or not to use expired coupons and
            whether or not to return expired promotions</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of promotions</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getPromotionUsageCountMaxRetries--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPromotionUsageCountMaxRetries</h4>
<pre>int&nbsp;getPromotionUsageCountMaxRetries()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the maximum number of optimistic concurrency retries when setting the
         promotion usage count</dd>
</dl>
</li>
</ul>
<a name="setPromotionUsageCountMaxRetries-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPromotionUsageCountMaxRetries</h4>
<pre>void&nbsp;setPromotionUsageCountMaxRetries(int&nbsp;promotionUsageCountMaxRetries)</pre>
<div class="block">The maximum number of optimistic concurrency retries when setting the promotion usage count</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>promotionUsageCountMaxRetries</code> - the promotionUsageCountMaxRetries to set</dd>
</dl>
</li>
</ul>
<a name="getPromotion-int-java.lang.String-int-com.konakart.appif.FetchPromotionOptionsIf-com.konakart.appif.FetchProductOptionsIf-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getPromotion</h4>
<pre><a href="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</a>&nbsp;getPromotion(int&nbsp;promotionId,
                         java.lang.String&nbsp;promotionName,
                         int&nbsp;languageId,
                         <a href="../../../com/konakart/appif/FetchPromotionOptionsIf.html" title="interface in com.konakart.appif">FetchPromotionOptionsIf</a>&nbsp;prmOptions,
                         <a href="../../../com/konakart/appif/FetchProductOptionsIf.html" title="interface in com.konakart.appif">FetchProductOptionsIf</a>&nbsp;prodOptions)
                  throws java.lang.Exception</pre>
<div class="block">This API call is used to retrieve a single promotion matching an id or name. Depending on how
 the options are configured, the returned object may have its arrays of included / excluded
 products, categories and manufacturers populated. If a product has options (variants) then we
 return the product populated with all of the options that are included or excluded for the
 promotion.
 <p>
 The purpose of this method is mainly to determine what products, manufacturers or categories
 are included or excluded from the promotion in order to be able to display this information
 on the storefront. However if the <code>FetchPromotionOptions</code> is configured to only
 return the promotion if active, then we check the following:
 <ul>
 <li>That the promotion is active.</li>
 <li>That the current time is within the configured date range of the promotion.</li>
 <li>That the promotion hasn't reached its max usage limit.</li>
 <li>If the <code>couponCodes</code> attribute of the <code>FetchPromotionOptions</code>
 object has been populated and the promotion requires a coupon then we check that at least one
 coupon will activate the promotion.</li>
 <li>That the customer hasn't been excluded from the promotion.</li>
 <li>That the customer hasn't reached his personal max usage limit.</li>
 <li>That the customer group isn't excluded from the promotion.</li>
 <li>That any one expression attached to the promotion evaluates to true.</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>promotionId</code> - The numeric id of the promotion used to identify it. It should be set to a
            negative number in order to search for the promotion using the promotion name.</dd>
<dd><code>promotionName</code> - If not set to null, the promotion name is used to search for the promotion instead
            of the numeric id.</dd>
<dd><code>languageId</code> - The id for the language that will be used when creating the attached products,
            categories and manufacturers. Value of -1 selects the default language.</dd>
<dd><code>prmOptions</code> - A FetchPromotionOptions object used to configure the API call. It may be set to
            null for default functionality.</dd>
<dd><code>prodOptions</code> - A FetchProductOptions used to configure the products (if any) attached to the
            promotion. It may be set to null for default functionality.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a fully populated promotion object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/blif/ProductMgrIf.html" title="interface in com.konakart.blif"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/konakart/blif/PunchOutMgrIf.html" title="interface in com.konakart.blif"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/blif/PromotionMgrIf.html" target="_top">Frames</a></li>
<li><a href="PromotionMgrIf.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2018 DS Data Systems UK Ltd.</small></p>
</body>
</html>
