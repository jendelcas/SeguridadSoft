<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_212) on Thu Dec 23 11:31:28 GMT 2021 -->
<title>PromotionMgrEE (KonaKart Server Engine API Documentation)</title>
<meta name="date" content="2021-12-23">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PromotionMgrEE (KonaKart Server Engine API Documentation)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/bl/PromotionMgr.StaticData.html" title="class in com.konakart.bl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/konakart/bl/PunchOutMgr.html" title="class in com.konakart.bl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/bl/PromotionMgrEE.html" target="_top">Frames</a></li>
<li><a href="PromotionMgrEE.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.com.konakart.bl.PromotionMgr">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.com.konakart.bl.PromotionMgr">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.konakart.bl</div>
<h2 title="Class PromotionMgrEE" class="title">Class PromotionMgrEE</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">com.konakart.bl.BaseMgr</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">com.konakart.bl.PromotionMgr</a></li>
<li>
<ul class="inheritance">
<li>com.konakart.bl.PromotionMgrEE</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/konakart/blif/PromotionMgrIf.html" title="interface in com.konakart.blif">PromotionMgrIf</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">PromotionMgrEE</span>
extends <a href="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">PromotionMgr</a>
implements <a href="../../../com/konakart/blif/PromotionMgrIf.html" title="interface in com.konakart.blif">PromotionMgrIf</a></pre>
<div class="block">Promotion Mgr - EE version.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.com.konakart.bl.PromotionMgr">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;com.konakart.bl.<a href="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">PromotionMgr</a></h3>
<code><a href="../../../com/konakart/bl/PromotionMgr.StaticData.html" title="class in com.konakart.bl">PromotionMgr.StaticData</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.konakart.bl.PromotionMgr">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.konakart.bl.<a href="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">PromotionMgr</a></h3>
<code><a href="../../../com/konakart/bl/PromotionMgr.html#ALL">ALL</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#COUPON_DOESNT_EXIST">COUPON_DOESNT_EXIST</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#COUPON_EXISTS_ACTIVE">COUPON_EXISTS_ACTIVE</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#COUPON_EXISTS_INACTIVE">COUPON_EXISTS_INACTIVE</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#EXCLUDE">EXCLUDE</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#GIFT_CERTIFICATE_RELATION_TYPE">GIFT_CERTIFICATE_RELATION_TYPE</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#INCLUDE">INCLUDE</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#log">log</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#mutex">mutex</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#PROMOTION_RELATION_TYPE">PROMOTION_RELATION_TYPE</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#promotionUsageCountMaxRetries">promotionUsageCountMaxRetries</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#promotionUseMutex">promotionUseMutex</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#staticDataHM">staticDataHM</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.konakart.bl.BaseMgr">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.konakart.bl.<a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">BaseMgr</a></h3>
<code><a href="../../../com/konakart/bl/BaseMgr.html#templateBaseDir">templateBaseDir</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/PromotionMgrEE.html#PromotionMgrEE-com.konakart.appif.KKEngIf-">PromotionMgrEE</a></span>(<a href="../../../com/konakart/appif/KKEngIf.html" title="interface in com.konakart.appif">KKEngIf</a>&nbsp;eng)</code>
<div class="block">Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/PromotionMgrEE.html#getProductMapKey-int-int-int-">getProductMapKey</a></span>(int&nbsp;prodId,
                int&nbsp;prodOptionId,
                int&nbsp;prodOptionValueId)</code>
<div class="block">Create a unique key for the Product Map</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/PromotionMgrEE.html#getPromotion-int-java.lang.String-int-com.konakart.appif.FetchPromotionOptionsIf-com.konakart.appif.FetchProductOptionsIf-">getPromotion</a></span>(int&nbsp;promotionId,
            java.lang.String&nbsp;promotionName,
            int&nbsp;languageId,
            <a href="../../../com/konakart/appif/FetchPromotionOptionsIf.html" title="interface in com.konakart.appif">FetchPromotionOptionsIf</a>&nbsp;prmOptions,
            <a href="../../../com/konakart/appif/FetchProductOptionsIf.html" title="interface in com.konakart.appif">FetchProductOptionsIf</a>&nbsp;prodOptions)</code>
<div class="block">This API call is used to retrieve a single promotion matching an id or name.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/PromotionMgrEE.html#getPromotionsPerProducts-java.lang.String-int-com.konakart.appif.ProductIf:A-com.konakart.appif.PromotionIf:A-java.lang.String:A-com.konakart.appif.PromotionOptionsIf-">getPromotionsPerProducts</a></span>(java.lang.String&nbsp;sessionId,
                        int&nbsp;customerId,
                        <a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>[]&nbsp;products,
                        <a href="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</a>[]&nbsp;promotions,
                        java.lang.String[]&nbsp;couponCodes,
                        <a href="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</a>&nbsp;options)</code>
<div class="block">This method is used to calculate a discount on individual products so that the discount can
 be displayed without having to add the product to the cart.<br>
 The method receives an array of products and returns an array of products with attached
 PromotionResult objects that contain the results of one or more of the promotions passed in
 as a parameter.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.konakart.bl.PromotionMgr">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.konakart.bl.<a href="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">PromotionMgr</a></h3>
<code><a href="../../../com/konakart/bl/PromotionMgr.html#applyDiscount-com.konakart.appif.ProductIf-com.konakart.appif.PromotionResultIf-com.konakart.appif.PromotionOptionsIf-">applyDiscount</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkCategory-com.konakart.app.Promotion-com.konakart.appif.ProductIf-java.util.HashMap-java.util.HashMap-">checkCategory</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkCoupon-com.konakart.app.Promotion-com.konakart.app.Order-">checkCoupon</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkCoupon-com.konakart.app.Promotion-java.lang.String:A-">checkCoupon</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkCoupon-java.lang.String-">checkCoupon</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkCustomer-com.konakart.app.Promotion-int-">checkCustomer</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkCustomerGroup-com.konakart.app.Promotion-int-">checkCustomerGroup</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkCustomerUse-com.konakart.app.Promotion-int-">checkCustomerUse</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkExpression-com.konakart.app.Promotion-int-java.util.HashMap-">checkExpression</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkManufacturer-com.konakart.app.Promotion-com.konakart.appif.ProductIf-java.util.HashMap-">checkManufacturer</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkProduct-com.konakart.app.Promotion-com.konakart.appif.OrderProductIf-java.util.HashMap-">checkProduct</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#checkPromotion-com.konakart.app.Promotion-">checkPromotion</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getAllPromotions--">getAllPromotions</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getCouponPerId-int-com.konakart.appif.CouponOptionsIf-">getCouponPerId</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getCouponsPerCode-java.lang.String-com.konakart.appif.CouponOptionsIf-">getCouponsPerCode</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getCustomerId-java.lang.String-int-">getCustomerId</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getOrderProductsFromProduct-com.konakart.appif.ProductIf-">getOrderProductsFromProduct</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionCategoryMap-com.konakart.appif.PromotionIf:A-">getPromotionCategoryMap</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionCategoryMapKey-int-int-">getPromotionCategoryMapKey</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionExpressionMap-com.konakart.appif.PromotionIf:A-">getPromotionExpressionMap</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionIdForGiftCertificate-int-int-int-">getPromotionIdForGiftCertificate</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionIdForGiftCertificate-com.konakart.appif.OrderProductIf-">getPromotionIdForGiftCertificate</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionManufacturerMap-com.konakart.appif.PromotionIf:A-">getPromotionManufacturerMap</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionManufacturerMapKey-int-int-">getPromotionManufacturerMapKey</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionProductMap-com.konakart.appif.PromotionIf:A-com.konakart.app.Order-com.konakart.appif.ProductIf:A-">getPromotionProductMap</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionProductMapKey-int-int-int-int-">getPromotionProductMapKey</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionResultArray-com.konakart.appif.PromotionResultIf:A-com.konakart.app.PromotionResult-">getPromotionResultArray</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotions-java.lang.String-com.konakart.app.Order-">getPromotions</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionsPerCoupon-java.lang.String-int-com.konakart.appif.PromotionOptionsIf-">getPromotionsPerCoupon</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionsPerOrderTotalCode-java.util.ArrayList-">getPromotionsPerOrderTotalCode</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionsPerOrderTotalCode-java.lang.String-">getPromotionsPerOrderTotalCode</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionUsageCountMaxRetries--">getPromotionUsageCountMaxRetries</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#insertCoupon-com.konakart.appif.CouponIf-int-">insertCoupon</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#processPrice-com.konakart.appif.ProductIf-com.konakart.appif.PromotionOptionsIf-">processPrice</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#refreshConfigs--">refreshConfigs</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#setCouponCriteriaWithStandardAttributes-com.konakart.db.KKCriteria-">setCouponCriteriaWithStandardAttributes</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#setPromotionCriteriaWithStandardAttributes-com.konakart.db.KKCriteria-">setPromotionCriteriaWithStandardAttributes</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#setPromotionUsageCountMaxRetries-int-">setPromotionUsageCountMaxRetries</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#updatePromotionUsage-com.konakart.app.Order-">updatePromotionUsage</a>, <a href="../../../com/konakart/bl/PromotionMgr.html#validateCoupon-com.konakart.appif.CouponIf-">validateCoupon</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.konakart.bl.BaseMgr">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.konakart.bl.<a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">BaseMgr</a></h3>
<code><a href="../../../com/konakart/bl/BaseMgr.html#acquireLock-java.lang.String-">acquireLock</a>, <a href="../../../com/konakart/bl/BaseMgr.html#addInsertAttr-org.apache.torque.util.Criteria-java.lang.String-int-">addInsertAttr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#addInsertAttr-org.apache.torque.util.Criteria-java.lang.String-java.lang.Object-">addInsertAttr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#addStringRuleConstraint-com.konakart.db.KKCriteria-java.lang.String-int-org.apache.torque.Column-">addStringRuleConstraint</a>, <a href="../../../com/konakart/bl/BaseMgr.html#addStringRuleConstraint-com.konakart.db.KKCriteria-java.lang.String-int-java.lang.String-">addStringRuleConstraint</a>, <a href="../../../com/konakart/bl/BaseMgr.html#checkRequired-java.lang.Object-java.lang.String-java.lang.String-">checkRequired</a>, <a href="../../../com/konakart/bl/BaseMgr.html#escapeHTML-java.lang.String-">escapeHTML</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-int-int-java.lang.String-boolean-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-int-int-java.lang.String-boolean-boolean-java.lang.String-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-int-int-java.lang.String-boolean-boolean-java.lang.String-java.util.List-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-java.util.List-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getAdminEngMgr--">getAdminEngMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getBasketMgr--">getBasketMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getBillingMgr--">getBillingMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getBookableProductMgr--">getBookableProductMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCacheMgr--">getCacheMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCatMgr--">getCatMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getConfigMgr--">getConfigMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCookieMgr--">getCookieMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCurrMgr--">getCurrMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCustMgr--">getCustMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCustomerIdFromSession-java.lang.String-">getCustomerIdFromSession</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCustomerStatsMgr--">getCustomerStatsMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCustomerTagMgr--">getCustomerTagMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getEmailMgr--">getEmailMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getEng--">getEng</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getEventMgr--">getEventMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getExportMgr--">getExportMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getHTMLEscaper--">getHTMLEscaper</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getKonaKartConfig-java.lang.String-boolean-">getKonaKartConfig</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getKonaKartConfig-java.lang.String-int-">getKonaKartConfig</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getKonaKartConfig-java.lang.String-long-">getKonaKartConfig</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getLangMgr--">getLangMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getManuMgr--">getManuMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMiscItemMgr--">getMiscItemMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMiscPriceMgr--">getMiscPriceMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMode--">getMode</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getModeString--">getModeString</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMqMgr--">getMqMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMultiStoreMgr--">getMultiStoreMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getNewCriteria--">getNewCriteria</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getNewCriteria-boolean-">getNewCriteria</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getOrderIntegrationMgr--">getOrderIntegrationMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getOrderMgr--">getOrderMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getOrderTotalMgr--">getOrderTotalMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getPaymentMgr--">getPaymentMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getProdMgr--">getProdMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getProductsToCategoresCriteria--">getProductsToCategoresCriteria</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getPromMgr--">getPromMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getPunchOutMgr--">getPunchOutMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getRewardPointMgr--">getRewardPointMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getSecMgr--">getSecMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getShippingMgr--">getShippingMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getSolrMgr--">getSolrMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getStoreId--">getStoreId</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getStoreMgr--">getStoreMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getStoreTime--">getStoreTime</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getSuggestionMgr--">getSuggestionMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getTaxMgr--">getTaxMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getTemplate-org.apache.velocity.app.VelocityEngine-java.lang.String-java.lang.String-">getTemplate</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getTemplateRoot-java.lang.String-">getTemplateRoot</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getVelocityContextMgr--">getVelocityContextMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getWishListMgr--">getWishListMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#init-com.konakart.appif.KKEngIf-org.apache.commons.logging.Log-">init</a>, <a href="../../../com/konakart/bl/BaseMgr.html#insertKKEvent-int-int-int-">insertKKEvent</a>, <a href="../../../com/konakart/bl/BaseMgr.html#insertKKEvent-int-int-java.lang.String-">insertKKEvent</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isBusiness--">isBusiness</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isBusinessOrEnterprise--">isBusinessOrEnterprise</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isClassPresent-java.lang.String-">isClassPresent</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isCommunity--">isCommunity</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isDeadlockException-java.sql.SQLException-">isDeadlockException</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isEnterprise--">isEnterprise</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareCategories--">isMultiStoreShareCategories</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareCustomers--">isMultiStoreShareCustomers</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareCustomersOrProducts--">isMultiStoreShareCustomersOrProducts</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreSharedDb--">isMultiStoreSharedDb</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareProducts--">isMultiStoreShareProducts</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiVendor--">isMultiVendor</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isUnix--">isUnix</a>, <a href="../../../com/konakart/bl/BaseMgr.html#manageThrowable-java.lang.Throwable-">manageThrowable</a>, <a href="../../../com/konakart/bl/BaseMgr.html#releaseLock-java.lang.String-">releaseLock</a>, <a href="../../../com/konakart/bl/BaseMgr.html#updateStaticVariablesNow-long-">updateStaticVariablesNow</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.konakart.blif.PromotionMgrIf">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.konakart.blif.<a href="../../../com/konakart/blif/PromotionMgrIf.html" title="interface in com.konakart.blif">PromotionMgrIf</a></h3>
<code><a href="../../../com/konakart/blif/PromotionMgrIf.html#checkCoupon-java.lang.String-">checkCoupon</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#getAllPromotions--">getAllPromotions</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#getCouponPerId-int-com.konakart.appif.CouponOptionsIf-">getCouponPerId</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#getCouponsPerCode-java.lang.String-com.konakart.appif.CouponOptionsIf-">getCouponsPerCode</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionIdForGiftCertificate-com.konakart.appif.OrderProductIf-">getPromotionIdForGiftCertificate</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotions-java.lang.String-com.konakart.app.Order-">getPromotions</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionsPerCoupon-java.lang.String-int-com.konakart.appif.PromotionOptionsIf-">getPromotionsPerCoupon</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionUsageCountMaxRetries--">getPromotionUsageCountMaxRetries</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#insertCoupon-com.konakart.appif.CouponIf-int-">insertCoupon</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#refreshConfigs--">refreshConfigs</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#setPromotionUsageCountMaxRetries-int-">setPromotionUsageCountMaxRetries</a>, <a href="../../../com/konakart/blif/PromotionMgrIf.html#updatePromotionUsage-com.konakart.app.Order-">updatePromotionUsage</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PromotionMgrEE-com.konakart.appif.KKEngIf-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PromotionMgrEE</h4>
<pre>public&nbsp;PromotionMgrEE(<a href="../../../com/konakart/appif/KKEngIf.html" title="interface in com.konakart.appif">KKEngIf</a>&nbsp;eng)
               throws java.lang.Exception</pre>
<div class="block">Constructor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>eng</code> - the eng</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPromotionsPerProducts-java.lang.String-int-com.konakart.appif.ProductIf:A-com.konakart.appif.PromotionIf:A-java.lang.String:A-com.konakart.appif.PromotionOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPromotionsPerProducts</h4>
<pre>public&nbsp;<a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>[]&nbsp;getPromotionsPerProducts(java.lang.String&nbsp;sessionId,
                                            int&nbsp;customerId,
                                            <a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>[]&nbsp;products,
                                            <a href="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</a>[]&nbsp;promotions,
                                            java.lang.String[]&nbsp;couponCodes,
                                            <a href="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</a>&nbsp;options)
                                     throws java.lang.Exception</pre>
<div class="block">This method is used to calculate a discount on individual products so that the discount can
 be displayed without having to add the product to the cart.<br>
 The method receives an array of products and returns an array of products with attached
 PromotionResult objects that contain the results of one or more of the promotions passed in
 as a parameter. The PromotionResult contains the value of the discount, whether it is an
 amount or a percentage discount and also information regarding the promotion it applies to.
 If a product has an array of ProductQuantity objects (one for each SKU) each one of these may
 have an array of PromotionResult objects since a promotion may only apply to one product
 configuration and not to another (i.e. blue shirt and not red shirt).<br>
 The PromotionOptions object can be configured so that the values of the promotions for a
 product are subtracted from the product price. The options allow you to set rules that
 determine whether in this case the promotions need to be cumulative or whether the largest or
 smallest should be chosen. The calculation is only made for products with a single array of
 PromotionResult objects. It is not calculated for products that have an array of
 PromotionResult objects for each ProductQuantity.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionsPerProducts-java.lang.String-int-com.konakart.appif.ProductIf:A-com.konakart.appif.PromotionIf:A-java.lang.String:A-com.konakart.appif.PromotionOptionsIf-">getPromotionsPerProducts</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/PromotionMgrIf.html" title="interface in com.konakart.blif">PromotionMgrIf</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../com/konakart/bl/PromotionMgr.html#getPromotionsPerProducts-java.lang.String-int-com.konakart.appif.ProductIf:A-com.konakart.appif.PromotionIf:A-java.lang.String:A-com.konakart.appif.PromotionOptionsIf-">getPromotionsPerProducts</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">PromotionMgr</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - Only used if the customer is logged in. Otherwise set to null.</dd>
<dd><code>customerId</code> - If the sessionId is set to null then the customerId should contain the id of the
            temporary user which is a negative number. The temporary user id can be used for
            evaluating expression rules.</dd>
<dd><code>products</code> - An array of products to be processed</dd>
<dd><code>promotions</code> - The promotions which will be applied to the products if all rules are matched.</dd>
<dd><code>couponCodes</code> - Coupon codes to use. If none of the promotions require coupons, it should be set
            to null</dd>
<dd><code>options</code> - An object containing information to configure the calculation for applying one or
            more promotion results to the product price.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the same array of products passed in as a parameter with attached
         PromotionResult objects if applicable</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getPromotion-int-java.lang.String-int-com.konakart.appif.FetchPromotionOptionsIf-com.konakart.appif.FetchProductOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPromotion</h4>
<pre>public&nbsp;<a href="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</a>&nbsp;getPromotion(int&nbsp;promotionId,
                                java.lang.String&nbsp;promotionName,
                                int&nbsp;languageId,
                                <a href="../../../com/konakart/appif/FetchPromotionOptionsIf.html" title="interface in com.konakart.appif">FetchPromotionOptionsIf</a>&nbsp;prmOptions,
                                <a href="../../../com/konakart/appif/FetchProductOptionsIf.html" title="interface in com.konakart.appif">FetchProductOptionsIf</a>&nbsp;prodOptions)
                         throws java.lang.Exception</pre>
<div class="block">This API call is used to retrieve a single promotion matching an id or name. Depending on how
 the options are configured, the returned object may have its arrays of included / excluded
 products, categories and manufacturers populated. If a product has options (variants) then we
 return the product populated with all of the options that are included or excluded for the
 promotion.
 <p>
 The purpose of this method is mainly to determine what products, manufacturers or categories
 are included or excluded from the promotion in order to be able to display this information
 on the storefront. However if the <code>FetchPromotionOptions</code> is configured to only
 return the promotion if active, then we check the following:
 <ul>
 <li>That the promotion is active.</li>
 <li>That the current time is within the configured date range of the promotion.</li>
 <li>That the promotion hasn't reached its max usage limit.</li>
 <li>If the <code>couponCodes</code> attribute of the <code>FetchPromotionOptions</code>
 object has been populated and the promotion requires a coupon then we check that at least one
 coupon will activate the promotion.</li>
 <li>That the customer hasn't been excluded from the promotion.</li>
 <li>That the customer hasn't reached his personal max usage limit.</li>
 <li>That the customer group isn't excluded from the promotion.</li>
 <li>That any one expression attached to the promotion evaluates to true.</li>
 </ul></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/PromotionMgrIf.html#getPromotion-int-java.lang.String-int-com.konakart.appif.FetchPromotionOptionsIf-com.konakart.appif.FetchProductOptionsIf-">getPromotion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/PromotionMgrIf.html" title="interface in com.konakart.blif">PromotionMgrIf</a></code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../com/konakart/bl/PromotionMgr.html#getPromotion-int-java.lang.String-int-com.konakart.appif.FetchPromotionOptionsIf-com.konakart.appif.FetchProductOptionsIf-">getPromotion</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">PromotionMgr</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>promotionId</code> - The numeric id of the promotion used to identify it. It should be set to a
            negative number in order to search for the promotion using the promotion name.</dd>
<dd><code>promotionName</code> - If not set to null, the promotion name is used to search for the promotion instead
            of the numeric id.</dd>
<dd><code>languageId</code> - The id for the language that will be used when creating the attached products,
            categories and manufacturers. Value of -1 selects the default language.</dd>
<dd><code>prmOptions</code> - A FetchPromotionOptions object used to configure the API call. It may be set to
            null for default functionality.</dd>
<dd><code>prodOptions</code> - A FetchProductOptions used to configure the products (if any) attached to the
            promotion. It may be set to null for default functionality.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a fully populated promotion object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getProductMapKey-int-int-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getProductMapKey</h4>
<pre>protected&nbsp;java.lang.String&nbsp;getProductMapKey(int&nbsp;prodId,
                                            int&nbsp;prodOptionId,
                                            int&nbsp;prodOptionValueId)</pre>
<div class="block">Create a unique key for the Product Map</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>prodId</code> - the prodId</dd>
<dd><code>prodOptionId</code> - the prodOptionId</dd>
<dd><code>prodOptionValueId</code> - the prodOptionValueId</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the key</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/bl/PromotionMgr.StaticData.html" title="class in com.konakart.bl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/konakart/bl/PunchOutMgr.html" title="class in com.konakart.bl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/bl/PromotionMgrEE.html" target="_top">Frames</a></li>
<li><a href="PromotionMgrEE.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.com.konakart.bl.PromotionMgr">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.com.konakart.bl.PromotionMgr">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2018 DS Data Systems UK Ltd.</small></p>
</body>
</html>
