<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_212) on Thu Dec 23 11:31:27 GMT 2021 -->
<title>BasketMgr (KonaKart Server Engine API Documentation)</title>
<meta name="date" content="2021-12-23">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BasketMgr (KonaKart Server Engine API Documentation)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/konakart/bl/BasketMgr.OptionSortOrderComparator.html" title="class in com.konakart.bl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/bl/BasketMgr.html" target="_top">Frames</a></li>
<li><a href="BasketMgr.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.konakart.bl</div>
<h2 title="Class BasketMgr" class="title">Class BasketMgr</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">com.konakart.bl.BaseMgr</a></li>
<li>
<ul class="inheritance">
<li>com.konakart.bl.BasketMgr</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">BasketMgr</span>
extends <a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">BaseMgr</a>
implements <a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></pre>
<div class="block">Manages all business logic relevant to the management of the shopping cart within the system</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.OptionSortOrderComparator.html" title="class in com.konakart.bl">BasketMgr.OptionSortOrderComparator</a></span></code>
<div class="block">Used to sort the Option objects based on option id</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static org.apache.commons.logging.Log</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#log">log</a></span></code>
<div class="block">the log</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.konakart.bl.BaseMgr">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.konakart.bl.<a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">BaseMgr</a></h3>
<code><a href="../../../com/konakart/bl/BaseMgr.html#templateBaseDir">templateBaseDir</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#BasketMgr-com.konakart.appif.KKEngIf-">BasketMgr</a></span>(<a href="../../../com/konakart/appif/KKEngIf.html" title="interface in com.konakart.appif">KKEngIf</a>&nbsp;eng)</code>
<div class="block">Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#addToBasket-int-com.konakart.app.Basket-com.konakart.appif.AddToBasketOptionsIf-">addToBasket</a></span>(int&nbsp;customerId,
           <a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
           <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">We must take the information passed into the method and create a customers_basket record as
 well as one or more customers_basket_attributes records.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#addToBasket-java.lang.String-int-com.konakart.appif.BasketIf-">addToBasket</a></span>(java.lang.String&nbsp;sessionId,
           int&nbsp;customerId,
           <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)</code>
<div class="block">Determines the customerId to use and calls the protected method with the customerId.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#addToBasketWithOptions-java.lang.String-int-com.konakart.appif.BasketIf-com.konakart.appif.AddToBasketOptionsIf-">addToBasketWithOptions</a></span>(java.lang.String&nbsp;sessionId,
                      int&nbsp;customerId,
                      <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item,
                      <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">If options is set to null, this method is identical to addToBasket().</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#checkBasketBelongsToCustomer-int-int-">checkBasketBelongsToCustomer</a></span>(int&nbsp;customerId,
                            int&nbsp;basketId)</code>
<div class="block">Throws an exception if the basket item doesn't belong to the customer.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#checkBasketOptions-com.konakart.app.Basket-">checkBasketOptions</a></span>(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;b)</code>
<div class="block">We may have the case where the basket object has an array of options that only have the id
 and value id set.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#createEncodedProduct-int-com.konakart.appif.OptionIf:A-">createEncodedProduct</a></span>(int&nbsp;productId,
                    <a href="../../../com/konakart/appif/OptionIf.html" title="interface in com.konakart.appif">OptionIf</a>[]&nbsp;opts)</code>
<div class="block">Create the encoded product The customers_basket table contains a products_id field which is
 encoded like this : 1{3}6{4}3 which means product of id==1 with product_options of id==3 and
 product_options_values of id==6 followed by product_options of id==4 and
 product_options_values of id==3.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/konakart/appif/FetchProductOptionsIf.html" title="interface in com.konakart.appif">FetchProductOptionsIf</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#createFetchProductOptions-com.konakart.appif.AddToBasketOptionsIf-">createFetchProductOptions</a></span>(<a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Creates a FetchProductOptions object from an AddToBasketOptions</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#findOptionInProduct-com.konakart.appif.ProductIf-com.konakart.app.Option-">findOptionInProduct</a></span>(<a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>&nbsp;p,
                   <a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>&nbsp;o)</code>
<div class="block">The basket object must have a populated product object with options.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#getBasket-int-">getBasket</a></span>(int&nbsp;basketId)</code>
<div class="block">Used to get a basket object using the primary key</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#getBasketItemsPerCustomer-java.lang.String-int-int-">getBasketItemsPerCustomer</a></span>(java.lang.String&nbsp;sessionId,
                         int&nbsp;customerId,
                         int&nbsp;languageId)</code>
<div class="block">Get the basket items for a customer.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#getBasketItemsPerCustomerWithOptions-int-com.konakart.app.Address-int-com.konakart.appif.AddToBasketOptionsIf-">getBasketItemsPerCustomerWithOptions</a></span>(int&nbsp;customerId,
                                    <a href="../../../com/konakart/app/Address.html" title="class in com.konakart.app">Address</a>&nbsp;customerAddr,
                                    int&nbsp;languageId,
                                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Get the basket items for a customer.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#getBasketItemsPerCustomerWithOptions-java.lang.String-int-int-com.konakart.appif.AddToBasketOptionsIf-">getBasketItemsPerCustomerWithOptions</a></span>(java.lang.String&nbsp;sessionId,
                                    int&nbsp;customerId,
                                    int&nbsp;languageId,
                                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Get the basket items for a customer.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#getBasketItemsPerEncodedProductAndCustomer-int-java.lang.String-">getBasketItemsPerEncodedProductAndCustomer</a></span>(int&nbsp;customerId,
                                          java.lang.String&nbsp;encodedProduct)</code>
<div class="block">This is used to see if a product that we are adding to the basket already exists in it.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#getCustomerId-java.lang.String-int-">getCustomerId</a></span>(java.lang.String&nbsp;sessionId,
             int&nbsp;customerId)</code>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#getOptsForBasketItem-com.konakart.app.Basket-int-int-com.konakart.appif.AddToBasketOptionsIf-">getOptsForBasketItem</a></span>(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                    int&nbsp;priceId,
                    int&nbsp;languageId,
                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;a2bOptions)</code>
<div class="block">The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#mergeBaskets-java.lang.String-int-">mergeBaskets</a></span>(java.lang.String&nbsp;sessionId,
            int&nbsp;customerFromId)</code>
<div class="block">Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#mergeBasketsWithOptions-java.lang.String-int-com.konakart.appif.AddToBasketOptionsIf-">mergeBasketsWithOptions</a></span>(java.lang.String&nbsp;sessionId,
                       int&nbsp;customerFromId,
                       <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#populateOptsForBasketItem-com.konakart.app.Basket-int-int-com.konakart.appif.AddToBasketOptionsIf-">populateOptsForBasketItem</a></span>(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                         int&nbsp;priceId,
                         int&nbsp;languageId,
                         <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;a2bOptions)</code>
<div class="block">The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#removeBasketItemsPerCustomer-int-">removeBasketItemsPerCustomer</a></span>(int&nbsp;customerId)</code>
<div class="block">We delete all basket items that exist for the customer passed in as a parameter.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#removeBasketItemsPerCustomer-java.lang.String-int-">removeBasketItemsPerCustomer</a></span>(java.lang.String&nbsp;sessionId,
                            int&nbsp;customerId)</code>
<div class="block">We determine which customerId to use and then delete all basket items that exist for this
 customer by calling the protected method.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#removeFromBasket-int-com.konakart.appif.BasketIf-">removeFromBasket</a></span>(int&nbsp;customerId,
                <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)</code>
<div class="block">We must remove the customers_basket record and any associated customers_basket_attributes
 records.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#removeFromBasket-java.lang.String-int-com.konakart.appif.BasketIf-">removeFromBasket</a></span>(java.lang.String&nbsp;sessionId,
                int&nbsp;customerId,
                <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)</code>
<div class="block">We must remove the customers_basket record and any associated customers_basket_attributes
 records.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#setCriteriaWithStandardAttributes-com.konakart.db.KKCriteria-com.konakart.appif.AddToBasketOptionsIf-">setCriteriaWithStandardAttributes</a></span>(<a href="../../../com/konakart/db/KKCriteria.html" title="class in com.konakart.db">KKCriteria</a>&nbsp;c,
                                 <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Sets the criteria with the standard attributes so as not to have to repeat this code many
 times.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#updateBasket-int-com.konakart.app.Basket-com.konakart.appif.AddToBasketOptionsIf-">updateBasket</a></span>(int&nbsp;customerId,
            <a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
            <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">We must update the customers_basket record.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#updateBasket-java.lang.String-int-com.konakart.appif.BasketIf-">updateBasket</a></span>(java.lang.String&nbsp;sessionId,
            int&nbsp;customerId,
            <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)</code>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#updateBasketWithOptions-java.lang.String-int-com.konakart.appif.BasketIf-com.konakart.appif.AddToBasketOptionsIf-">updateBasketWithOptions</a></span>(java.lang.String&nbsp;sessionId,
                       int&nbsp;customerId,
                       <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item,
                       <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#updateBasketWithStockInfo-com.konakart.appif.BasketIf:A-">updateBasketWithStockInfo</a></span>(<a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>[]&nbsp;basketItems)</code>
<div class="block">Receives an array of basket items and updates each one with the current stock level.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code><a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/konakart/bl/BasketMgr.html#updateBasketWithStockInfoWithOptions-com.konakart.appif.BasketIf:A-com.konakart.appif.AddToBasketOptionsIf-">updateBasketWithStockInfoWithOptions</a></span>(<a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>[]&nbsp;basketItems,
                                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</code>
<div class="block">Receives an array of basket items and updates each one with the current stock level.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.konakart.bl.BaseMgr">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.konakart.bl.<a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">BaseMgr</a></h3>
<code><a href="../../../com/konakart/bl/BaseMgr.html#acquireLock-java.lang.String-">acquireLock</a>, <a href="../../../com/konakart/bl/BaseMgr.html#addInsertAttr-org.apache.torque.util.Criteria-java.lang.String-int-">addInsertAttr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#addInsertAttr-org.apache.torque.util.Criteria-java.lang.String-java.lang.Object-">addInsertAttr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#addStringRuleConstraint-com.konakart.db.KKCriteria-java.lang.String-int-org.apache.torque.Column-">addStringRuleConstraint</a>, <a href="../../../com/konakart/bl/BaseMgr.html#addStringRuleConstraint-com.konakart.db.KKCriteria-java.lang.String-int-java.lang.String-">addStringRuleConstraint</a>, <a href="../../../com/konakart/bl/BaseMgr.html#checkRequired-java.lang.Object-java.lang.String-java.lang.String-">checkRequired</a>, <a href="../../../com/konakart/bl/BaseMgr.html#escapeHTML-java.lang.String-">escapeHTML</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-int-int-java.lang.String-boolean-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-int-int-java.lang.String-boolean-boolean-java.lang.String-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-int-int-java.lang.String-boolean-boolean-java.lang.String-java.util.List-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#executeQuery-java.lang.String-java.util.List-">executeQuery</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getAdminEngMgr--">getAdminEngMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getBasketMgr--">getBasketMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getBillingMgr--">getBillingMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getBookableProductMgr--">getBookableProductMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCacheMgr--">getCacheMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCatMgr--">getCatMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getConfigMgr--">getConfigMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCookieMgr--">getCookieMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCurrMgr--">getCurrMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCustMgr--">getCustMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCustomerIdFromSession-java.lang.String-">getCustomerIdFromSession</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCustomerStatsMgr--">getCustomerStatsMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getCustomerTagMgr--">getCustomerTagMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getEmailMgr--">getEmailMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getEng--">getEng</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getEventMgr--">getEventMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getExportMgr--">getExportMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getHTMLEscaper--">getHTMLEscaper</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getKonaKartConfig-java.lang.String-boolean-">getKonaKartConfig</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getKonaKartConfig-java.lang.String-int-">getKonaKartConfig</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getKonaKartConfig-java.lang.String-long-">getKonaKartConfig</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getLangMgr--">getLangMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getManuMgr--">getManuMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMiscItemMgr--">getMiscItemMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMiscPriceMgr--">getMiscPriceMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMode--">getMode</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getModeString--">getModeString</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMqMgr--">getMqMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getMultiStoreMgr--">getMultiStoreMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getNewCriteria--">getNewCriteria</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getNewCriteria-boolean-">getNewCriteria</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getOrderIntegrationMgr--">getOrderIntegrationMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getOrderMgr--">getOrderMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getOrderTotalMgr--">getOrderTotalMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getPaymentMgr--">getPaymentMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getProdMgr--">getProdMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getProductsToCategoresCriteria--">getProductsToCategoresCriteria</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getPromMgr--">getPromMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getPunchOutMgr--">getPunchOutMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getRewardPointMgr--">getRewardPointMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getSecMgr--">getSecMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getShippingMgr--">getShippingMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getSolrMgr--">getSolrMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getStoreId--">getStoreId</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getStoreMgr--">getStoreMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getStoreTime--">getStoreTime</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getSuggestionMgr--">getSuggestionMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getTaxMgr--">getTaxMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getTemplate-org.apache.velocity.app.VelocityEngine-java.lang.String-java.lang.String-">getTemplate</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getTemplateRoot-java.lang.String-">getTemplateRoot</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getVelocityContextMgr--">getVelocityContextMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#getWishListMgr--">getWishListMgr</a>, <a href="../../../com/konakart/bl/BaseMgr.html#init-com.konakart.appif.KKEngIf-org.apache.commons.logging.Log-">init</a>, <a href="../../../com/konakart/bl/BaseMgr.html#insertKKEvent-int-int-int-">insertKKEvent</a>, <a href="../../../com/konakart/bl/BaseMgr.html#insertKKEvent-int-int-java.lang.String-">insertKKEvent</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isBusiness--">isBusiness</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isBusinessOrEnterprise--">isBusinessOrEnterprise</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isClassPresent-java.lang.String-">isClassPresent</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isCommunity--">isCommunity</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isDeadlockException-java.sql.SQLException-">isDeadlockException</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isEnterprise--">isEnterprise</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareCategories--">isMultiStoreShareCategories</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareCustomers--">isMultiStoreShareCustomers</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareCustomersOrProducts--">isMultiStoreShareCustomersOrProducts</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreSharedDb--">isMultiStoreSharedDb</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareProducts--">isMultiStoreShareProducts</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isMultiVendor--">isMultiVendor</a>, <a href="../../../com/konakart/bl/BaseMgr.html#isUnix--">isUnix</a>, <a href="../../../com/konakart/bl/BaseMgr.html#manageThrowable-java.lang.Throwable-">manageThrowable</a>, <a href="../../../com/konakart/bl/BaseMgr.html#releaseLock-java.lang.String-">releaseLock</a>, <a href="../../../com/konakart/bl/BaseMgr.html#updateStaticVariablesNow-long-">updateStaticVariablesNow</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>protected static&nbsp;org.apache.commons.logging.Log log</pre>
<div class="block">the log</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BasketMgr-com.konakart.appif.KKEngIf-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BasketMgr</h4>
<pre>public&nbsp;BasketMgr(<a href="../../../com/konakart/appif/KKEngIf.html" title="interface in com.konakart.appif">KKEngIf</a>&nbsp;eng)
          throws java.lang.Exception</pre>
<div class="block">Constructor</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>eng</code> - the eng</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getBasketItemsPerCustomer-java.lang.String-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBasketItemsPerCustomer</h4>
<pre>public&nbsp;<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;getBasketItemsPerCustomer(java.lang.String&nbsp;sessionId,
                                          int&nbsp;customerId,
                                          int&nbsp;languageId)
                                   throws java.lang.Exception</pre>
<div class="block">Get the basket items for a customer. We determine which customerId to use and then call the
 protected method. Although we read the final_price from the db, we set it through a
 calculation since OsCommerce doesn't store this in the DB. We do store it in the DB but never
 use it directly from the DB.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#getBasketItemsPerCustomer-java.lang.String-int-int-">getBasketItemsPerCustomer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>languageId</code> - the languageId</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of Basket Items</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getBasketItemsPerCustomerWithOptions-java.lang.String-int-int-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBasketItemsPerCustomerWithOptions</h4>
<pre>public&nbsp;<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;getBasketItemsPerCustomerWithOptions(java.lang.String&nbsp;sessionId,
                                                     int&nbsp;customerId,
                                                     int&nbsp;languageId,
                                                     <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                                              throws java.lang.Exception</pre>
<div class="block">Get the basket items for a customer. We determine which customerId to use and then call the
 protected method. Although we read the final_price from the db, we set it through a
 calculation since OsCommerce doesn't store this in the DB. We do store it in the DB but never
 use it directly from the DB.
 
 If options is set to null then this call is identical to getBasketItemsPerCustomer(). The
 options may determine from where we read the price and quantity of the basket items.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#getBasketItemsPerCustomerWithOptions-java.lang.String-int-int-com.konakart.appif.AddToBasketOptionsIf-">getBasketItemsPerCustomerWithOptions</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>languageId</code> - the languageId</dd>
<dd><code>options</code> - the options</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of Basket Items</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getBasketItemsPerCustomerWithOptions-int-com.konakart.app.Address-int-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBasketItemsPerCustomerWithOptions</h4>
<pre>protected&nbsp;<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;getBasketItemsPerCustomerWithOptions(int&nbsp;customerId,
                                                        <a href="../../../com/konakart/app/Address.html" title="class in com.konakart.app">Address</a>&nbsp;customerAddr,
                                                        int&nbsp;languageId,
                                                        <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                                                 throws java.lang.Exception</pre>
<div class="block">Get the basket items for a customer. Although we read the final_price from the db, we set it
 through a calculation since OsCommerce doesn't store this in the DB. We do store it in the DB
 but never use it directly from the DB. This makes sense since the basket is persisted and the
 price of a product may change during the life of the basket.
 
 If we are passed an address, then we use that address for calculating tax. Otherwise we get
 the address from the customerId. If the customer id &lt; 0, then we use the store location
 for calculating tax because this means that the customer hasn't logged in yet.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>customerAddr</code> - the customerAddr</dd>
<dd><code>languageId</code> - the languageId</dd>
<dd><code>options</code> - the options</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of Basket Items</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="addToBasketWithOptions-java.lang.String-int-com.konakart.appif.BasketIf-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToBasketWithOptions</h4>
<pre>public&nbsp;int&nbsp;addToBasketWithOptions(java.lang.String&nbsp;sessionId,
                                  int&nbsp;customerId,
                                  <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item,
                                  <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                           throws java.lang.Exception</pre>
<div class="block">If options is set to null, this method is identical to addToBasket(). Otherwise the
 functionality differs depending on the combination of options set.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#addToBasketWithOptions-java.lang.String-int-com.konakart.appif.BasketIf-com.konakart.appif.AddToBasketOptionsIf-">addToBasketWithOptions</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>item</code> - the item</dd>
<dd><code>options</code> - the options</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the id of the newly created Basket object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="addToBasket-java.lang.String-int-com.konakart.appif.BasketIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToBasket</h4>
<pre>public&nbsp;int&nbsp;addToBasket(java.lang.String&nbsp;sessionId,
                       int&nbsp;customerId,
                       <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)
                throws java.lang.Exception</pre>
<div class="block">Determines the customerId to use and calls the protected method with the customerId.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#addToBasket-java.lang.String-int-com.konakart.appif.BasketIf-">addToBasket</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>item</code> - the item</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the id of the newly created Basket object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="addToBasket-int-com.konakart.app.Basket-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addToBasket</h4>
<pre>protected&nbsp;int&nbsp;addToBasket(int&nbsp;customerId,
                          <a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                          <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                   throws java.lang.Exception</pre>
<div class="block">We must take the information passed into the method and create a customers_basket record as
 well as one or more customers_basket_attributes records. The inserts are done in a
 transaction.
 
 Depending on how the options are set, if the item already exists with the same options etc,
 then we just increase the quantity of the existing item.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>item</code> - the item</dd>
<dd><code>options</code> - the options</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the id of the newly created Basket object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getBasketItemsPerEncodedProductAndCustomer-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBasketItemsPerEncodedProductAndCustomer</h4>
<pre>protected&nbsp;<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;getBasketItemsPerEncodedProductAndCustomer(int&nbsp;customerId,
                                                              java.lang.String&nbsp;encodedProduct)
                                                       throws org.apache.torque.TorqueException,
                                                              com.workingdogs.village.DataSetException</pre>
<div class="block">This is used to see if a product that we are adding to the basket already exists in it.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>encodedProduct</code> - the encodedProduct</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Basket Object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.apache.torque.TorqueException</code> - an unexpected exception in Torque (the database layer)</dd>
<dd><code>com.workingdogs.village.DataSetException</code> - an unexpected exception due to data in Torque (the database layer)</dd>
</dl>
</li>
</ul>
<a name="checkBasketOptions-com.konakart.app.Basket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkBasketOptions</h4>
<pre>protected&nbsp;void&nbsp;checkBasketOptions(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;b)
                           throws com.konakart.app.KKException</pre>
<div class="block">We may have the case where the basket object has an array of options that only have the id
 and value id set. If this is the case we need to populate them with the price so that the
 total can be calculated. Any option that is attached to the basket, should also be present in
 the product, so here we get the fully populated option from the product and attach it to the
 basket. If it isn't present in the product we throw an exception.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>b</code> - the b</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.konakart.app.KKException</code> - an unexpected KKException exception</dd>
</dl>
</li>
</ul>
<a name="findOptionInProduct-com.konakart.appif.ProductIf-com.konakart.app.Option-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findOptionInProduct</h4>
<pre>public&nbsp;<a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>&nbsp;findOptionInProduct(<a href="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</a>&nbsp;p,
                                  <a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>&nbsp;o)
                           throws com.konakart.app.KKException</pre>
<div class="block">The basket object must have a populated product object with options. The option passed in as
 a parameter is only partially populated so we try to find it in the array of options of the
 product and return the fully populated one.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#findOptionInProduct-com.konakart.appif.ProductIf-com.konakart.app.Option-">findOptionInProduct</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - the p</dd>
<dd><code>o</code> - the o</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Option</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.konakart.app.KKException</code> - an unexpected KKException exception</dd>
</dl>
</li>
</ul>
<a name="updateBasket-java.lang.String-int-com.konakart.appif.BasketIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasket</h4>
<pre>public&nbsp;void&nbsp;updateBasket(java.lang.String&nbsp;sessionId,
                         int&nbsp;customerId,
                         <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)
                  throws com.konakart.app.KKException,
                         com.workingdogs.village.DataSetException,
                         java.lang.Exception</pre>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and that it points to the customerId passed in as a parameter.
 
 Then we call the protected method.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#updateBasket-java.lang.String-int-com.konakart.appif.BasketIf-">updateBasket</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>item</code> - the item</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
<dd><code>com.workingdogs.village.DataSetException</code> - an unexpected exception due to data in Torque (the database layer)</dd>
<dd><code>com.konakart.app.KKException</code> - an unexpected KKException exception</dd>
</dl>
</li>
</ul>
<a name="updateBasketWithOptions-java.lang.String-int-com.konakart.appif.BasketIf-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasketWithOptions</h4>
<pre>public&nbsp;void&nbsp;updateBasketWithOptions(java.lang.String&nbsp;sessionId,
                                    int&nbsp;customerId,
                                    <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item,
                                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                             throws com.konakart.app.KKException,
                                    com.workingdogs.village.DataSetException,
                                    java.lang.Exception</pre>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and that it points to the customerId passed in as a parameter.
 
 Then we call the protected method.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithOptions-java.lang.String-int-com.konakart.appif.BasketIf-com.konakart.appif.AddToBasketOptionsIf-">updateBasketWithOptions</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>item</code> - the item</dd>
<dd><code>options</code> - the options</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
<dd><code>com.workingdogs.village.DataSetException</code> - an unexpected exception due to data in Torque (the database layer)</dd>
<dd><code>com.konakart.app.KKException</code> - an unexpected KKException exception</dd>
</dl>
</li>
</ul>
<a name="updateBasket-int-com.konakart.app.Basket-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasket</h4>
<pre>protected&nbsp;void&nbsp;updateBasket(int&nbsp;customerId,
                            <a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                            <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                     throws com.konakart.app.KKException,
                            com.workingdogs.village.DataSetException,
                            java.lang.Exception</pre>
<div class="block">We must update the customers_basket record. Normally used to change the quantity. The final
 price is recalculated and saved. We never use the price from the db (we always recalculate
 it) since OsCommerce doesn't set it so we have to be compatible.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>item</code> - the item</dd>
<dd><code>options</code> - the options</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
<dd><code>com.workingdogs.village.DataSetException</code> - an unexpected exception due to data in Torque (the database layer)</dd>
<dd><code>com.konakart.app.KKException</code> - an unexpected KKException exception</dd>
</dl>
</li>
</ul>
<a name="removeBasketItemsPerCustomer-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeBasketItemsPerCustomer</h4>
<pre>public&nbsp;void&nbsp;removeBasketItemsPerCustomer(java.lang.String&nbsp;sessionId,
                                         int&nbsp;customerId)
                                  throws java.lang.Exception</pre>
<div class="block">We determine which customerId to use and then delete all basket items that exist for this
 customer by calling the protected method.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#removeBasketItemsPerCustomer-java.lang.String-int-">removeBasketItemsPerCustomer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="removeBasketItemsPerCustomer-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeBasketItemsPerCustomer</h4>
<pre>protected&nbsp;void&nbsp;removeBasketItemsPerCustomer(int&nbsp;customerId)
                                     throws java.lang.Exception</pre>
<div class="block">We delete all basket items that exist for the customer passed in as a parameter.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>customerId</code> - the customerId</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="removeFromBasket-java.lang.String-int-com.konakart.appif.BasketIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeFromBasket</h4>
<pre>public&nbsp;void&nbsp;removeFromBasket(java.lang.String&nbsp;sessionId,
                             int&nbsp;customerId,
                             <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)
                      throws java.lang.Exception</pre>
<div class="block">We must remove the customers_basket record and any associated customers_basket_attributes
 records.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#removeFromBasket-java.lang.String-int-com.konakart.appif.BasketIf-">removeFromBasket</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>item</code> - the item</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="removeFromBasket-int-com.konakart.appif.BasketIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeFromBasket</h4>
<pre>protected&nbsp;void&nbsp;removeFromBasket(int&nbsp;customerId,
                                <a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>&nbsp;item)
                         throws java.lang.Exception</pre>
<div class="block">We must remove the customers_basket record and any associated customers_basket_attributes
 records.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>item</code> - the item</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="populateOptsForBasketItem-com.konakart.app.Basket-int-int-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>populateOptsForBasketItem</h4>
<pre>public&nbsp;void&nbsp;populateOptsForBasketItem(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                                      int&nbsp;priceId,
                                      int&nbsp;languageId,
                                      <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;a2bOptions)
                               throws java.lang.Exception</pre>
<div class="block">The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6. We have to read this encoded field called encodedProduct and
 create an array of Options and then set the opts attribute and the productId attribute of the
 Basket object passed in.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#populateOptsForBasketItem-com.konakart.app.Basket-int-int-com.konakart.appif.AddToBasketOptionsIf-">populateOptsForBasketItem</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>item</code> - the item</dd>
<dd><code>priceId</code> - the priceId</dd>
<dd><code>languageId</code> - the languageId</dd>
<dd><code>a2bOptions</code> - the a2bOptions</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getOptsForBasketItem-com.konakart.app.Basket-int-int-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOptsForBasketItem</h4>
<pre>public&nbsp;<a href="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</a>[]&nbsp;getOptsForBasketItem(<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;item,
                                     int&nbsp;priceId,
                                     int&nbsp;languageId,
                                     <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;a2bOptions)
                              throws java.lang.Exception</pre>
<div class="block">The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6. We have to read this encoded field called encodedProduct and
 create an array of Options and then set the productId attribute of the Basket object passed
 in.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#getOptsForBasketItem-com.konakart.app.Basket-int-int-com.konakart.appif.AddToBasketOptionsIf-">getOptsForBasketItem</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>item</code> - the item</dd>
<dd><code>priceId</code> - the priceId</dd>
<dd><code>languageId</code> - the languageId</dd>
<dd><code>a2bOptions</code> - the a2bOptions</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of options</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="createEncodedProduct-int-com.konakart.appif.OptionIf:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createEncodedProduct</h4>
<pre>public&nbsp;java.lang.String&nbsp;createEncodedProduct(int&nbsp;productId,
                                             <a href="../../../com/konakart/appif/OptionIf.html" title="interface in com.konakart.appif">OptionIf</a>[]&nbsp;opts)</pre>
<div class="block">Create the encoded product The customers_basket table contains a products_id field which is
 encoded like this : 1{3}6{4}3 which means product of id==1 with product_options of id==3 and
 product_options_values of id==6 followed by product_options of id==4 and
 product_options_values of id==3. The order is very important (product option ids increasing)
 since this the encoded product has to match regardless of the ordering of the options in the
 ops array.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#createEncodedProduct-int-com.konakart.appif.OptionIf:A-">createEncodedProduct</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>productId</code> - the productId</dd>
<dd><code>opts</code> - the opts</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The encoded string</dd>
</dl>
</li>
</ul>
<a name="mergeBaskets-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeBaskets</h4>
<pre>public&nbsp;void&nbsp;mergeBaskets(java.lang.String&nbsp;sessionId,
                         int&nbsp;customerFromId)
                  throws java.lang.Exception</pre>
<div class="block">Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId. This is done when a customer logs in, to move his temporary basket to his
 permanent basket.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#mergeBaskets-java.lang.String-int-">mergeBaskets</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerFromId</code> - the customerFromId</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="mergeBasketsWithOptions-java.lang.String-int-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeBasketsWithOptions</h4>
<pre>public&nbsp;void&nbsp;mergeBasketsWithOptions(java.lang.String&nbsp;sessionId,
                                    int&nbsp;customerFromId,
                                    <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                             throws java.lang.Exception</pre>
<div class="block">Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId. This is done when a customer logs in, to move his temporary basket to his
 permanent basket.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#mergeBasketsWithOptions-java.lang.String-int-com.konakart.appif.AddToBasketOptionsIf-">mergeBasketsWithOptions</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerFromId</code> - the customerFromId</dd>
<dd><code>options</code> - the options</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="getCustomerId-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCustomerId</h4>
<pre>protected&nbsp;int&nbsp;getCustomerId(java.lang.String&nbsp;sessionId,
                            int&nbsp;customerId)
                     throws java.lang.Exception</pre>
<div class="block">If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and we don't use the customerId because we get the id from the session.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionId</code> - the sessionId</dd>
<dd><code>customerId</code> - the customerId</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns the customerId that should be used by the caller</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="checkBasketBelongsToCustomer-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkBasketBelongsToCustomer</h4>
<pre>protected&nbsp;void&nbsp;checkBasketBelongsToCustomer(int&nbsp;customerId,
                                            int&nbsp;basketId)
                                     throws org.apache.torque.TorqueException,
                                            com.konakart.app.KKException</pre>
<div class="block">Throws an exception if the basket item doesn't belong to the customer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>customerId</code> - the customerId</dd>
<dd><code>basketId</code> - the basketId</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.apache.torque.TorqueException</code> - an unexpected exception in Torque (the database layer)</dd>
<dd><code>com.konakart.app.KKException</code> - an unexpected KKException exception</dd>
</dl>
</li>
</ul>
<a name="updateBasketWithStockInfo-com.konakart.appif.BasketIf:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasketWithStockInfo</h4>
<pre>public&nbsp;<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;updateBasketWithStockInfo(<a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>[]&nbsp;basketItems)
                                   throws java.lang.Exception</pre>
<div class="block">Receives an array of basket items and updates each one with the current stock level. This is
 a useful check to make before checking out, to see whether the stock level is sufficient.
 
 If the product or any of the product attributes of a basket item no longer exist, then that
 basket item is not returned. This means that the size of the returned array may be smaller
 than the size of the array passed in as a parameter.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithStockInfo-com.konakart.appif.BasketIf:A-">updateBasketWithStockInfo</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>basketItems</code> - the basketItems</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of basket items with updated stock level</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="updateBasketWithStockInfoWithOptions-com.konakart.appif.BasketIf:A-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateBasketWithStockInfoWithOptions</h4>
<pre>public&nbsp;<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>[]&nbsp;updateBasketWithStockInfoWithOptions(<a href="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</a>[]&nbsp;basketItems,
                                                     <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)
                                              throws java.lang.Exception</pre>
<div class="block">Receives an array of basket items and updates each one with the current stock level. This is
 a useful check to make before checking out, to see whether the stock level is sufficient.
 
 If the product or any of the product attributes of a basket item no longer exist, then that
 basket item is not returned. This means that the size of the returned array may be smaller
 than the size of the array passed in as a parameter.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithStockInfoWithOptions-com.konakart.appif.BasketIf:A-com.konakart.appif.AddToBasketOptionsIf-">updateBasketWithStockInfoWithOptions</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>basketItems</code> - the basketItems</dd>
<dd><code>options</code> - the options</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns an array of basket items with updated stock level</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="createFetchProductOptions-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFetchProductOptions</h4>
<pre>protected&nbsp;<a href="../../../com/konakart/appif/FetchProductOptionsIf.html" title="interface in com.konakart.appif">FetchProductOptionsIf</a>&nbsp;createFetchProductOptions(<a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</pre>
<div class="block">Creates a FetchProductOptions object from an AddToBasketOptions</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>options</code> - the options</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Return a FetchProductOptions object</dd>
</dl>
</li>
</ul>
<a name="getBasket-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBasket</h4>
<pre>protected&nbsp;<a href="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</a>&nbsp;getBasket(int&nbsp;basketId)
                    throws java.lang.Exception</pre>
<div class="block">Used to get a basket object using the primary key</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>basketId</code> - the basketId</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a basket object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - an unexpected exception</dd>
</dl>
</li>
</ul>
<a name="setCriteriaWithStandardAttributes-com.konakart.db.KKCriteria-com.konakart.appif.AddToBasketOptionsIf-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setCriteriaWithStandardAttributes</h4>
<pre>protected&nbsp;void&nbsp;setCriteriaWithStandardAttributes(<a href="../../../com/konakart/db/KKCriteria.html" title="class in com.konakart.db">KKCriteria</a>&nbsp;c,
                                                 <a href="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</a>&nbsp;options)</pre>
<div class="block">Sets the criteria with the standard attributes so as not to have to repeat this code many
 times.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>c</code> - the c</dd>
<dd><code>options</code> - the AddToBasketOptionsIf options</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/konakart/bl/BasketMgr.OptionSortOrderComparator.html" title="class in com.konakart.bl"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/konakart/bl/BasketMgr.html" target="_top">Frames</a></li>
<li><a href="BasketMgr.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2018 DS Data Systems UK Ltd.</small></p>
</body>
</html>
